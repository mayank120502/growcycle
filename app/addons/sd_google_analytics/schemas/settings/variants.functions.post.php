<?php
 use Tygh\Enum\ProductFeatures; use Tygh\Registry; function fn_settings_variants_addons_sd_google_analytics_select_refund_statuses() { return fn_sd_ga_order_statuses_schema('I'); } function fn_settings_variants_addons_sd_google_analytics_select_paid_statuses() { return fn_sd_ga_order_statuses_schema('D'); } function fn_settings_variants_addons_sd_google_analytics_select_brand() { $company_id = Registry::get('runtime.company_id'); $join = db_quote('LEFT JOIN ?:product_features_descriptions AS pfd ON pfd.feature_id = pf.feature_id AND pfd.lang_code = ?s', CART_LANGUAGE); if (fn_allowed_for('ULTIMATE')) { $join .= db_quote(' LEFT JOIN ?:ult_objects_sharing AS os ON os.share_object_id = pf.feature_id'); $condition = ($company_id) ? db_quote('AND os.share_company_id = ?i', $company_id) : ''; } else { $condition = ($company_id) ? db_quote('AND company_id = ?i', $company_id) : ''; } $features = db_get_hash_single_array( 'SELECT pfd.feature_id, pfd.description ' . ' FROM ?:product_features AS pf ?p ' . ' WHERE feature_type = ?s ?p', ['feature_id', 'description'], $join, ProductFeatures::EXTENDED, $condition ); return count($features) > 1 ? fn_array_merge(array('--'), $features) : $features; } 