<?php
 use Tygh\Enum\NotificationSeverity; use Tygh\Enum\RecipientSearchMethods; use Tygh\Enum\UserTypes; use Tygh\Notifications\DataValue; use Tygh\Notifications\Transports\Internal\InternalMessageSchema; use Tygh\Notifications\Transports\Internal\InternalTransport; use Tygh\NotificationsCenter\NotificationsCenter; defined('BOOTSTRAP') or die('Access denied'); if (version_compare(PRODUCT_VERSION, '4.11.0', '<')) { return $schema; } $schema['sd_google_analytics.require_tracking_code'] = [ 'group' => 'sd_google_analytics.templates', 'name' => [ 'template' => 'sd_google_analytics.event.require_tracking_code.name', 'params' => [], ], 'receivers' => [ UserTypes::ADMIN => [ InternalTransport::getId() => InternalMessageSchema::create([ 'tag' => 'sd_google_analytics.tracking_code', 'area' => 'A', 'section' => NotificationsCenter::SECTION_ADMINISTRATION, 'severity' => NotificationSeverity::WARNING, 'recipient_search_method' => RecipientSearchMethods::USER_ID, 'recipient_search_criteria' => DataValue::create('user_id', 1), 'language_code' => DataValue::create('lang_code', CART_LANGUAGE), 'title' => [ 'template' => 'sd_google_analytics.event.require_tracking_code.name', ], 'message' => [ 'template' => 'sd_google_analytics.event.require_tracking_code.message', 'params' => [ '[link]' => fn_url('addons.manage#groupsd_google_analytics') ] ] ]), ], ], ]; $schema['sd_google_analytics.require_logs'] = [ 'group' => 'sd_google_analytics.templates', 'name' => [ 'template' => 'sd_google_analytics.event.require_logs.name', 'params' => [], ], 'receivers' => [ UserTypes::ADMIN => [ InternalTransport::getId() => InternalMessageSchema::create([ 'tag' => 'sd_google_analytics.logs', 'area' => 'A', 'section' => NotificationsCenter::SECTION_ADMINISTRATION, 'severity' => NotificationSeverity::WARNING, 'recipient_search_method' => RecipientSearchMethods::USER_ID, 'recipient_search_criteria' => DataValue::create('user_id', 1), 'language_code' => DataValue::create('lang_code', CART_LANGUAGE), 'title' => [ 'template' => 'sd_google_analytics.event.require_logs.name', ], 'message' => [ 'template' => 'sd_google_analytics.event.require_logs.message', 'params' => [ '[link]' => fn_url('settings.manage?section_id=Logging') ] ] ]), ], ], ]; return $schema;