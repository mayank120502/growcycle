<?php
 defined('BOOTSTRAP') or die('Access denied'); use Tygh\Models\VendorPlan; use Tygh\Registry; if ($_SERVER['REQUEST_METHOD'] == 'POST') { return [CONTROLLER_STATUS_OK]; } if ($mode == 'update' || $mode == 'add') { if ( fn_allowed_for('MULTIVENDOR') && Registry::get('addons.vendor_plans.status') == 'A' ) { $view = Tygh::$app['view']; $id = 0; if ($mode == 'update') { if (!empty($_REQUEST['plan_id'])) { $plan = VendorPlan::model()->find($_REQUEST['plan_id'], ['get_companies_count' => true]); } if (!$plan) { return [CONTROLLER_STATUS_NO_PAGE]; } $view->assign('plan', $plan); $id = $plan->plan_id; } $tabs = Registry::get('navigation.tabs'); if (isset($tabs) && !isset($tabs['addons_' . $id])) { $addons_tab = [ 'addons_' . $id => [ 'title' => __('addons'), 'js' => true, ], ]; $tabs = array_merge($tabs, $addons_tab); Registry::set('navigation.tabs', $tabs); } } } 