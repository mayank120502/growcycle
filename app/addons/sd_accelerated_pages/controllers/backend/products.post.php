<?php
 use Tygh\Registry; defined('BOOTSTRAP') or die('Access denied'); if ($_SERVER['REQUEST_METHOD'] == 'POST') { return array(CONTROLLER_STATUS_OK); } if ($mode == 'manage') { $selected_fields = Tygh::$app['view']->getTemplateVars('selected_fields'); $selected_fields[] = array( 'name' => '[data][amp_description]', 'text' => __('sd_accelerated_pages.amp_full_description') ); Tygh::$app['view']->assign('selected_fields', $selected_fields); } elseif ($mode == 'm_update') { $selected_fields = Tygh::$app['session']['selected_fields']; $field_groups = Tygh::$app['view']->getTemplateVars('field_groups'); $filled_groups = Tygh::$app['view']->getTemplateVars('filled_groups'); $field_names = Tygh::$app['view']->getTemplateVars('field_names'); if (!empty($selected_fields['data']['amp_description'])) { $field_groups['D']['amp_description'] = 'products_data'; $filled_groups['D']['amp_description'] = __('sd_accelerated_pages.amp_full_description'); } if (isset($field_names['amp_description'])) { unset($field_names['amp_description']); } Tygh::$app['view']->assign('field_groups', $field_groups); Tygh::$app['view']->assign('filled_groups', $filled_groups); Tygh::$app['view']->assign('field_names', $field_names); } 