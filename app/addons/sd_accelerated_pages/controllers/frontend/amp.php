<?php
 use Tygh\Registry; defined('BOOTSTRAP') or die('Access denied'); if ($_SERVER['REQUEST_METHOD'] == 'POST') { if ($mode == 'user_dismiss') { fn_sd_accelerated_pages_set_cookie_consent(); fn_echo('Y'); } return array(CONTROLLER_STATUS_OK); } if ($mode == 'user_notification') { $need_show_popup = false; if (Registry::get('addons.sd_accelerated_pages.show_cookie_agreement') == 'Y') { $need_show_popup = fn_sd_accelerated_pages_need_cookie_policy($_REQUEST); } echo json_encode( array( 'showNotification' => $need_show_popup ) ); exit; } elseif ($mode == 'cache_warmup') { fn_sd_accelerated_pages_cache_warmup(); fn_echo(__('finished')); exit; } 