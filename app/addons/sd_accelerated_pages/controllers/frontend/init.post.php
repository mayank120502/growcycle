<?php
 use Tygh\Registry; use Tygh\Addons\Gdpr\CookiesPolicyManager; defined('BOOTSTRAP') or die('Access denied'); if ($_SERVER['REQUEST_METHOD'] == 'POST') { return array(CONTROLLER_STATUS_OK); } if (Registry::get('is_amp_link')) { if (Registry::get('addons.seo.status') != 'A') { $seo_canonical = array( 'current' => fn_url(Registry::get('config.current_url')) ); Tygh::$app['view']->assign('seo_canonical', $seo_canonical); } $amp_scripts = array( 'sidebar' => true, 'bind' => true ); $amp_google_tracking_code = Registry::ifGet('addons.sd_accelerated_pages.google_tracking_code', ''); if (!empty($amp_google_tracking_code)) { $amp_scripts['analytics'] = true; } Tygh::$app['view']->assign(array( 'amp_google_tracking_code' => $amp_google_tracking_code, 'amp_pixel_tracking_code' => Registry::ifGet('addons.sd_accelerated_pages.pixel_tracking_code', '') )); if (Registry::get('addons.sd_accelerated_pages.show_cookie_agreement') == 'Y') { $amp_scripts['user-notification'] = true; Tygh::$app['view']->assign('amp_cookies_law', __('sd_accelerated_pages.cookies_law')); } $amp_logo = fn_get_image_pairs( Registry::get('runtime.company_id'), 'amp_company_logo', 'M' ); Tygh::$app['view']->assign(array( 'root_categories' => fn_get_subcategories(0), 'amp_scripts_schema' => fn_get_schema('accelerated_pages', 'scripts'), 'amp_scripts' => $amp_scripts, 'amp_logo' => $amp_logo )); } 