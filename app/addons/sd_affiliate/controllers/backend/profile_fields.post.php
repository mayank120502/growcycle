<?php
 use Tygh\Registry; defined('BOOTSTRAP') or die('Access denied'); if ($_SERVER['REQUEST_METHOD'] == 'POST') { if ($mode == 'update') { if (isset($_REQUEST['field_data']['profile_show'], $_REQUEST['field_data']['profile_required'])) { fn_sd_affiliate_update_profile_field($_REQUEST['field_data']); } } if ($mode == 'm_update') { $fields_data = Registry::get('sd_affiliate_fields_data'); if (!empty($_REQUEST['fields_data']) && !empty($fields_data)) { foreach ($fields_data as $field) { if ( isset( $field['profile_show'], $field['profile_required'], $field['field_id'], $_REQUEST['fields_data'][$field['field_id']] ) ) { $field_data_updated = $_REQUEST['fields_data'][$field['field_id']]; if ( $field['profile_show'] != $field_data_updated['profile_show'] || $field['profile_required'] != $field_data_updated['profile_required'] ) { fn_sd_affiliate_update_profile_field($field_data_updated); } } } } Registry::del('sd_affiliate_fields_data'); } return [CONTROLLER_STATUS_OK]; } 